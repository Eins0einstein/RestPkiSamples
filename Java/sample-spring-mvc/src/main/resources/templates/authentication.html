<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head th:include="head"></head>
<body>

<div th:replace="menu"></div>

<div class="container">

    <h2>Authentication</h2>

    <form id="signForm" method="POST">

        <!--/* render the token in a hidden input field */-->
        <input type="hidden" id="tokenInput" name="token" th:value="${token}" />

        <!--/* Render a select (combo box) to list the user's certificates. For now it will be empty, we'll populate it later on (see javascript below). */-->
        <div class="form-group">
            <label for="certificateSelect">Choose a certificate</label>
            <select id="certificateSelect" class="form-control"></select>
        </div>

        <!--/*
            Action buttons. Notice that the "Sign In" button is NOT a submit button. When the user clicks the button,
            we must first use the Web PKI component to perform the client-side computation necessary and only when
            that computation is finished we'll submit the form programmatically (see js/signature-form.js).
        */-->
        <button id="signButton" type="button" class="btn btn-primary">Sign In</button>
        <button id="refreshButton" type="button" class="btn btn-default">Refresh Certificates</button>

    </form>

    <!--/*
        The file below contains the JS lib for accessing the Web PKI component. For more information, see:
        https://webpki.lacunasoftware.com/#/Documentation
    */-->
    <script src="/js/lacuna-web-pki-2.5.0.js"></script>

    <!--/*
         The file below contains the necessary calls to the Web PKI component. Once the necessary computations have been
         done, the javascript code will submit our form.

        Although we're making an authentication, at the lower level we're actually signing a cryptographic nonce (a
        random number generated by the REST PKI service), hence the similarity between the authentication client-side
        logic and that of the PAdES and CAdES signatures.
    */-->
    <script src="/js/signature-form.js"></script>

</div>
</body>
</html>
